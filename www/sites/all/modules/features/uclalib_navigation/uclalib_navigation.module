<?php
/**
 * @file
 * Code for the UCLALIB Navigation feature.
 */

include_once 'uclalib_navigation.features.inc';

/**
 * Implements hook_ctools_plugin_directory().
 */
function uclalib_navigation_ctools_plugin_directory($owner, $plugin_type) {
  switch ("$owner:$plugin_type") {
    case 'ctools:relationships':
    case 'ctools:content_types':
      return "plugins/$owner/$plugin_type";
  }

  return NULL;
}

/**
 * Get the parent node in the menu tree.
 *
 * @param $node
 * @return bool|mixed
 */
function uclalib_navigation_menu_get_parent($node) {
  menu_node_prepare($node);
  if (isset($node->menu['plid'])) {
    $pitem = menu_link_load($node->menu['plid']);
    if ($pitem['router_path'] == 'node/%') {
      $matches = array();
      if (preg_match('/^node\/([0-9]+)$/', $pitem['link_path'], $matches)) {
        return node_load($matches[1]);
      }
    }
  }

  return FALSE;
}
